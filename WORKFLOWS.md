# GitHub Actions Workflows Documentation

This document explains the purpose, triggers, and structure of the workflows used in this project.

---

## 1. CI Pipeline (`.github/workflows/ci.yml`)

### Purpose

- Run linting, formatting, and unit tests on each push and pull request.
- Ensure code coverage remains above 80%.
- Build the application and upload build artifacts.

### Triggers

- **push** to `main` or `develop` branches.
- **pull_request** targeting `main`.

### Jobs

1. **Lint**
   - Installs dependencies.
   - Runs `eslint` and `prettier --check` to enforce code quality and formatting.

2. **Test**
   - Runs Jest unit tests with coverage.
   - Fails if global coverage < 80%.

3. **Build**
   - Builds the app using `scripts/build.js`.
   - Uploads `dist/` as an artifact.
   - Uses dependency caching for faster runs.

### Dependencies

- Test depends on Lint.
- Build depends on Test.

### Secrets Required

- None (unless Codecov integration is added).

---

## 2. Deployment Workflow (`.github/workflows/pages.yml`)

### Purpose

- Deploys the application to **GitHub Pages**.
- Uses the `dist/` directory generated by the build job.

### Triggers

- **push** to `main`.

### Jobs

1. **Build**
   - Same as above: install, test, and build.
   - Uploads `dist/` as artifact.

2. **Deploy**
   - Downloads artifact.
   - Publishes to GitHub Pages.
   - Links deployment environment (`github-pages`).

### Dependencies

- `deploy` job depends on successful `build`.

### Secrets Required

- None (GitHub Pages uses built-in token).

---

## 3. Scheduled Dependency Audit (`.github/workflows/scheduled-audit.yml`)

### Purpose

- Automatically checks for outdated or insecure dependencies.
- Creates an issue if vulnerabilities are found.

### Triggers

- **schedule**: runs daily at midnight (UTC).
- **workflow_dispatch**: can also be triggered manually.

### Jobs

1. **Audit**
   - Runs `npm audit --json`.
   - Parses results and creates issue if vulnerabilities exist.

### Dependencies

- Standalone, no job dependencies.

### Secrets Required

- Uses built-in `GITHUB_TOKEN`.

---

## 4. Custom Action (`.github/actions/setup-node/action.yml`)

### Purpose

- Reusable step for setting up Node.js and installing dependencies.

### Usage

```yaml
- name: Setup Node and install deps
  uses: ./.github/actions/setup-node


# Workflow Documentation

## CI Pipeline
- **Purpose**: Run linting, tests with coverage, and build.
- **Trigger**: Runs on pushes to `main` and `develop`, and on pull requests to `main`.
- **Jobs**:
  - **Lint**: Uses ESLint and Prettier to enforce code style.
  - **Test**: Runs Jest tests with coverage. Fails if coverage < 80%.
  - **Build**: Builds the project and uploads artifacts.
- **Dependencies**: Node.js setup, `npm ci`.
- **Secrets**: Optional `CODECOV_TOKEN` for private repos.
- **Troubleshooting**:
  - Ensure `package-lock.json` exists (`npm install` before first push).
  - Coverage errors: write more tests or adjust threshold in `jest.config.cjs`.

---

## Deployment Workflow
- **Purpose**: Deploy static site to GitHub Pages.
- **Trigger**: Runs on push to `main`.
- **Jobs**:
  - **Build**: Runs `npm run build`, uploads dist/ folder as artifact.
  - **Deploy**: Publishes artifact to GitHub Pages.
- **Secrets**: None required for public repos.
- **Troubleshooting**:
  - If “No _site/ or dist/ found”, check your `build` script in `package.json`.
  - If Pages does not load: verify repo settings → Pages → source is GitHub Actions.

---

## Scheduled Audit
- **Purpose**: Run a daily dependency security audit.
- **Trigger**: Scheduled via cron (daily).
- **Jobs**:
  - **Audit**: Uses `npm audit` to detect vulnerabilities.
  - **Create Issue**: Opens an issue if critical/high vulnerabilities are found.
- **Secrets**: Requires `GITHUB_TOKEN` (provided by default).
- **Troubleshooting**:
  - Ensure Actions are enabled in repo settings.
  - If audit fails, update dependencies with `npm audit fix`.
```
